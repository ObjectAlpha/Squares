<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diagonal Squares — 5×5…40×40 (Web)</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="description" content="Мини-игра на поле 5×5…40×40 с запретом диагонального примыкания. Режимы: Человек vs Человек, Человек vs Компьютер, Компьютер vs Компьютер. Периодическое усиленное правило с обратным отсчётом." />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">▣</div>
      <h1>Diagonal Squares</h1>
    </div>

    <div class="controls">
      <label class="size">
        Размер
        <input id="sizeInput" type="number" min="5" max="40" value="40" />
      </label>

      <label class="mode">
        Режим
        <select id="modeSelect">
          <option value="HH">Человек ↔ Человек</option>
          <option value="HCPU" selected>Человек ↔ Компьютер</option>
          <option value="CPUCPU">Компьютер ↔ Компьютер</option>
        </select>
      </label>

      <label class="ai ai-p1" title="Уровень умности Игрок 1 (1–3)">
        ИИ Игрок 1
        <select id="aiLevelP1">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3" selected>3</option>
        </select>
      </label>

      <label class="ai ai-p2" title="Уровень умности Игрок 2 (1–3)">
        ИИ Игрок 2
        <select id="aiLevelP2">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3" selected>3</option>
        </select>
      </label>

      <label class="interval" title="Через сколько секунд включать усиленное правило (5–10)">
        Правило каждые (сек)
        <input id="ruleInterval" type="number" min="5" max="10" value="5" />
      </label>

      <button id="btnNew" class="btn btn-primary"><span class="ico">⟳</span> Новая партия</button>
      <button id="btnEnd" class="btn btn-danger"><span class="ico">⏹</span> Завершить</button>
      <button id="btnPass" class="btn btn-ghost"><span class="ico">⏭</span> Пас</button>
    </div>

    <div class="statusbar">
      <span class="chip chip-p1">Игрок 1: <b id="scoreP1">0</b></span>
      <span class="chip chip-p2">Игрок 2: <b id="scoreP2">0</b></span>
      <span class="chip chip-time">⏱ <b id="timer">00:00</b></span>
      <span class="chip chip-count" id="countChip">До усиления: <b id="countdown">—</b></span>
      <span class="chip chip-turn">Ход: <b id="turnWho">Игрок 1</b></span>
      <span class="chip chip-mode" id="modeChip">Режим</span>
    </div>
  </header>

  <main class="board-wrap">
    <div id="board" class="grid"></div>
  </main>

  <footer class="footer">
    <details open>
      <summary>Правила (кликните, чтобы свернуть/развернуть)</summary>
      <ul>
        <li><b>Поле:</b> от 5×5 до 40×40, изначально пустое. Игрок 1 ходит первым. Ходы по очереди.</li>
        <li><b>Базовое правило диагонали:</b> ставить нельзя, если у клетки есть занятые диагональные соседи (по углам).</li>
        <li><b>Очки за ход:</b> <code>1 + число занятых ортогональных соседей</code> (вверх/вниз/влево/вправо).</li>
        <li><b>Пас:</b> если у текущего игрока нет легальных ходов — он пасует. Два паса подряд завершают игру.</li>
        <li><b>Первый ход Игрока 2:</b> <u>не может</u> быть вплотную по стороне к первому ходу Игрока 1 (диагональ и так запрещена).</li>
        <li><b>Периодическое усиление:</b> каждые <b>N</b> секунд (N=5..10) активируется <u>дополнительный запрет</u>: игрок, чей ход в момент срабатывания, не может поставить фишку в клетку, у которой есть <u>ортогональные</u> занятые соседи. На панели — <b>обратный отсчёт</b> «До усиления»; при 0 чип краснеет и запрет действует, пока <u>именно этот игрок</u> не поставит фишку. Только в этот момент отсчёт **сбрасывается** и стартует заново.</li>
        <li><b>Завершение:</b> игра заканчивается после двух пасов подряд, либо по кнопке «Завершить» (в этом случае победитель определяется по текущему счёту).</li>
        <li><b>Блокировка настроек:</b> после запуска партии <u>нельзя</u> менять: размер поля, интервал усиления, режим, уровни ИИ — до конца игры.</li>
      </ul>
    </details>
  </footer>

  <script src="script.js"></script>
</body>
</html>
