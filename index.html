<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diagonal Squares — 5×5…40×40 (Web)</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="description" content="Мини-игра на поле 5×5…40×40 с настраиваемыми правилами: диагональ, длина фигуры, периодическое усиление, ИИ." />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">▣</div>
      <h1>Diagonal Squares</h1>
    </div>

    <div class="controls">
      <label class="size">
        Размер
        <input id="sizeInput" type="number" min="5" max="40" value="15" />
      </label>

      <label class="mode">
        Режим
        <select id="modeSelect">
          <option value="HH">Человек ↔ Человек</option>
          <option value="HCPU" selected>Человек ↔ Компьютер</option>
          <option value="CPUCPU">Компьютер ↔ Компьютер</option>
        </select>
      </label>

      <label class="ai ai-p1" title="Уровень умности Игрок 1 (1–3)">
        ИИ Игрок 1
        <select id="aiLevelP1">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3" selected>3</option>
        </select>
      </label>

      <label class="ai ai-p2" title="Уровень умности Игрок 2 (1–3)">
        ИИ Игрок 2
        <select id="aiLevelP2">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3" selected>3</option>
        </select>
      </label>

      <label class="interval" title="Через сколько секунд включать усиленное правило (5–10)">
        Правило каждые (сек)
        <input id="ruleInterval" type="number" min="5" max="10" value="5" />
      </label>

      <label class="linelim" title="Максимальная длина непрерывной фигуры по горизонтали/вертикали (1…Размер)">
        Длина фигуры
        <input id="lineLimit" type="number" min="1" max="15" value="15" />
      </label>

      <label class="diag" title="Разрешить/запретить диагональное примыкание">
        <input id="diagRule" type="checkbox" checked />
        Запрет диагонали
      </label>

      <button id="btnNew" class="btn btn-primary"><span class="ico">⟳</span> Новая партия</button>
      <button id="btnEnd" class="btn btn-danger"><span class="ico">⏹</span> Завершить</button>
      <button id="btnPass" class="btn btn-ghost"><span class="ico">⏭</span> Пас</button>
    </div>

    <div class="statusbar">
      <span class="chip chip-p1">Игрок 1: <b id="scoreP1">0</b></span>
      <span class="chip chip-p2">Игрок 2: <b id="scoreP2">0</b></span>
      <span class="chip chip-time">⏱ <b id="timer">00:00</b></span>
      <span class="chip chip-count" id="countChip">До усиления: <b id="countdown">—</b></span>
      <span class="chip chip-turn">Ход: <b id="turnWho">Игрок 1</b></span>
      <span class="chip chip-mode" id="modeChip">Режим</span>
    </div>
  </header>

  <main class="board-wrap">
    <div id="board" class="grid"></div>
  </main>

  <footer class="footer">
    <details>
      <summary>Правила (кликните, чтобы раскрыть)</summary>
      <ul>
        <li><b>Поле:</b> от 5×5 до 40×40, изначально пустое. Игрок 1 ходит первым. Ходы по очереди.</li>
        <li><b>Очки за ход:</b> <code>1 + число занятых ортогональных соседей</code>.</li>
        <li><b>Пас:</b> если у текущего игрока нет легальных ходов — он пасует. Два паса подряд завершают игру.</li>
        <li><b>Первый ход Игрока 2:</b> не может быть вплотную по стороне к первому ходу Игрока 1.</li>
        <li><b>Правило диагонали:</b> если включено, <u>нельзя</u> ставить в клетку, имеющую занятые диагональные соседи; если выключено — диагональ разрешена.</li>
        <li><b>Длина фигуры:</b> нельзя сделать ход, который создаст непрерывную линию занятых клеток по <u>горизонтали</u> или <u>вертикали</u> длиной больше выбранного значения.</li>
        <li><b>Периодическое усиление:</b> каждые N секунд (5–10) включается запрет ставить вплотную по стороне к любой занятой клетке для игрока на ходу; действует до его постановки фишки, только тогда отсчёт сбрасывается.</li>
        <li><b>Блокировка настроек:</b> после старта партии нельзя менять размер, интервал, длину фигуры, правило диагонали, режим и уровни ИИ до конца игры.</li>
        <li><b>Завершить:</b> кнопка завершает партию немедленно и объявляет победителя по текущему счёту.</li>
      </ul>
    </details>
  </footer>

  <script src="script.js"></script>
</body>
</html>
